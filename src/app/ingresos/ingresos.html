<h1 class="page-title">Pagos</h1>

<!-- Lista de pagos-->
<div class="row">
    <div class="col-md-12">
        <section widget class="widget">
            <header>
                <h4>
                    Lista <span class="fw-semi-bold">Pagos</span>
                </h4>
                <div class="widget-controls">
                    <a data-widgster="expand" title="Expand" href="#"><i class="glyphicon glyphicon-chevron-up"></i></a>
                    <a data-widgster="collapse" title="Collapse" href="#"><i class="glyphicon glyphicon-chevron-down"></i></a>
                    <a href="#" data-widgster="close"><i class="glyphicon glyphicon-remove"></i></a>
                </div>
            </header>
            <div class="widget-body">
                <table class="table">
                    <thead>
                        <tr>
                            <td>Fecha</td>
                            <td>Cliente</td>
                            <td>Monto</td>
                            <td>Descripción</td>
                            <td>Referencia</td>
                            <td>Forma de pago</td>
                            <td></td>
                        </tr> 
                    </thead>
                    <tbody>
                        <tr [hidden]="!contact.cliente" *ngFor="let payment of payments_array">
                            <td>{{payment.fecha}}</td>
                            <td>{{payment.cliente}}</td>
                            <td>{{payment.monto}}</td>
                            <td>{{payment.descripcion}}</td>
                            <td>{{payment.referencia}}</td>
                            <td>{{payment.fomapago}}</td>
                            <td>
                                <button (click)="goToEditPayment(payment.id)" type="button" class="btn btn-info" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                </button>
                                <button (click)="deleteClient(payment.id)" type="button" class="btn btn-danger" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </td>
                        </tr>    
                    </tbody>
                </table>    
            </div>
        </section>
    </div>
</div>

<!-- Editar pagos -->
<div class="row">
  <div class="col-md-12">
    <section widget class="widget">
      <header>
        <h4>
          Editar <span class="fw-semi-bold">Pago</span>
        </h4>
        <div class="widget-controls">
          <a data-widgster="expand" title="Expand" href="#"><i class="glyphicon glyphicon-chevron-up"></i></a>
          <a data-widgster="collapse" title="Collapse" href="#"><i class="glyphicon glyphicon-chevron-down"></i></a>
          <a href="#" data-widgster="close"><i class="glyphicon glyphicon-remove"></i></a>
        </div>
      </header>
      <div class="widget-body">


<form [ngFormModel]="ingresosForm" (submit)="editPayment(editData.id)" role="form" class="col-md-offset-2">
  
   <div class="row">
        <div class="col-md-10">
            
            <div class="form-group">
    <label>Fecha de ingreso</label>
    <div>
    <input [ngFormControl]="fecha" [value]="editData.fecha" required type="datetime-local" class="form-control">
</div>
     </div>
   </div>
    </div>
    <div class="row">
        <div class="col-md-10">
         <div class="form-group">
         <label>Cliente</label>
                        <div>
                            <select class = "form-control input-lg" >
                                <option *ngFor="let client of clients_array" [value]="client.value" [selected]="client.value==editData.cliente.id || id_t.value">{{client.nombre}}&nbsp;{{client.identificacion}}</option>
                            </select>
                            
                        </div>
                    </div>
            </div>
        </div>
    
    <div class="row">
        <div class="col-md-10">

            <div class="form-group">
                <label for="ejemplo_email_1">Monto</label>
                <input [ngFormControl]="monto" [value]="editData.monto" required type="number" step="0.01" class="form-control" id="monto"
                    placeholder="Introduzca el monto">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-10">

            <div class="form-group">
                <label for="ejemplo_email_1">Descripción</label>
                <input [ngFormControl]="descripcion" [value]="editData.descripcion" required type="text" class="form-control" id="descripcion"
                    placeholder="Descripción">
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-10">

            <div class="form-group">
                <label for="ejemplo_email_1">Referencia</label>
                <input [ngFormControl]="referencia" [value]="editData.referencia" required type="text" class="form-control" id="referencia"
                    placeholder="Introduzca la referencia">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-10">
            <div class="form-group">
                <label for="ejemplo_email_1">Forma de pago</label>
                <div>
                    <select [(ngModel)]="id_type"  required name="month" class = "form-control input-lg">
                        <option *ngFor="let id_t of id_types">{{id_t.name}}</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
   
    <button type="submit" class="btn btn-default">Guardar</button>
</form>
      </div>
    </section>
  </div>
</div>

<!-- Registrar pagos -->
<div class="row">
  <div class="col-md-12">
    <section widget class="widget">
      <header>
        <h4>
          Crear <span class="fw-semi-bold">Pago</span>
        </h4>
        <div class="widget-controls">
          <a data-widgster="expand" title="Expand" href="#"><i class="glyphicon glyphicon-chevron-up"></i></a>
          <a data-widgster="collapse" title="Collapse" href="#"><i class="glyphicon glyphicon-chevron-down"></i></a>
          <a href="#" data-widgster="close"><i class="glyphicon glyphicon-remove"></i></a>
        </div>
      </header>
      <div class="widget-body">


<form [ngFormModel]="ingresosForm" (submit)="addIngreso()" role="form" class="col-md-offset-2">
  
   <div class="row">
        <div class="col-md-10">
            
            <div class="form-group">
    <label>Fecha de ingreso</label>
    <div>
    <input [ngFormControl]="fecha" required type="datetime-local" class="form-control">
</div>
     </div>
   </div>
    </div>
    <div class="row">
        <div class="col-md-10">
         <div class="form-group">
         <label>Cliente</label>
                        <div>
                            <select class = "form-control input-lg" [(ngModel)]="cliente">
                                <option *ngFor="let client of clients_array" [value]="client.id">{{client.nombre}}&nbsp;{{client.identificacion}}</option>
                            </select>
                            
                        </div>
                    </div>
            </div>
        </div>
    
    <div class="row">
        <div class="col-md-10">

            <div class="form-group">
                <label for="ejemplo_email_1">Monto</label>
                <input [ngFormControl]="monto" required type="number" step="0.01" class="form-control" id="monto"
                    placeholder="Introduzca el monto">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-10">

            <div class="form-group">
                <label for="ejemplo_email_1">Descripción</label>
                <input [ngFormControl]="descripcion" required type="text" class="form-control" id="descripcion"
                    placeholder="Descripción">
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-10">

            <div class="form-group">
                <label for="ejemplo_email_1">Referencia</label>
                <input [ngFormControl]="referencia" required type="text" class="form-control" id="referencia"
                    placeholder="Introduzca la referencia">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-10">
            <div class="form-group">
                <label for="ejemplo_email_1">Forma de pago</label>
                <div>
                    <select [(ngModel)]="formapago"  required name="month" class = "form-control input-lg">
                        <option [value]="id_t.id" *ngFor="let id_t of id_types">{{id_t.name}}&nbsp;{{id_t.id}}</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
   
    <button type="submit" class="btn btn-default">Guardar</button>
</form>
      </div>
    </section>
  </div>
</div>

